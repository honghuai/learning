<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>render完整实例</title>
</head>
<style>
    .foo{
        font-size:18px;
        color: red;
    }
</style>
<body>
<div id="app">
    <my-component :level="4">www.baidu.com</my-component>
</div>
</body>
<script src="../../lib/vue2.1.3.js"></script>
<script>
    /**
     * 1.http://cn.vuejs.org/v2/guide/render-function.html#基础
     * 2.import AnchoredHeading from './AnchoredHeading.vue'
     new Vue({
  el: '#demo',
  render (h) {
    return (
      <AnchoredHeading level={1}>
        <span>Hello</span> world!
      </AnchoredHeading>
    )
  }
})
     3.在添加 functional: true 之后，锚点标题组件的 render 函数之间简单更新增加 context 参数，
     this.$slots.default 更新为 context.children，之后this.level 更新为 context.props.level。
     * */
    var getChildrenTextContent = function(children) {
        return children.map(function(node) {
            return node.children ? getChildrenTextContent(node.children) : node.text
        }).join("");
    }
    Vue.component("my-component",{
        functional: true,
        render: function(createElement,context){
            var headingId = getChildrenTextContent(context.children).toLowerCase().replace(/\W+/g,"-").replace(/(^\|\-$-)/g,"");
            return createElement(
                    "h"+context.props.level,
                    [
                        createElement("h1","this is h1"),
                        createElement("a",{
                            attrs: {
                                name: headingId,
                                href: "#"+headingId
                            },
                            class: {
                                foo: true
                            }
                        },context.children),
                        createElement("h5","this is h5"),
                        "this is my string inserted",
                        Array.apply(null,{
                            length: 20
                        }).map(function() {
                            return createElement("p","hi good morning");
                        })
                    ]
            )
        },
        props: {
            level: {
                type: Number,
                required: true
            }
        },
        methods: {
            clickHandler: function() {
                console.log("clickHandler点击事件");
            }
        }
    })
    new Vue({
        el: "#app"
    })
</script>
</html>